---
import { type FragmentOf, readFragment } from '~/lib/datocms/graphql';
import { ImageBlockFragment } from './graphql';
import { ResponsiveImage } from '~/components/ResponsiveImage';

interface Props {
  block: FragmentOf<typeof ImageBlockFragment>;
}

const { block } = Astro.props;

// Read unmasked block from fragment
const unmaskedBlock = readFragment(ImageBlockFragment, block);
---

{
  unmaskedBlock.image.responsiveImage && (
    <figure>
      {/* Display responsive image */}
      <ResponsiveImage data={unmaskedBlock.image.responsiveImage} />
      {/* Display image title */}
      <figcaption>{unmaskedBlock.image.title}</figcaption>
    </figure>
  )
}
