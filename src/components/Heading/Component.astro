---
import type { HTMLTag, Polymorphic } from 'astro/types';
import s from './style.module.css';

type Props<T extends HTMLTag = 'h1'> = Polymorphic<{
  as: T;
  anchor?: string;
}>;

const { as: Tag = 'h1' as any, anchor, children, ...props } = Astro.props;
---

<Tag {...props} class:list={[s.root, props.class]} data-with-anchor={!!anchor}>
  <slot />
  {anchor && <a data-anchor={anchor} id={anchor} />}
  {anchor && <a data-permalink href={`#${anchor}`} />}
</Tag>
