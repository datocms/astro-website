---
import { Layout } from '~/layouts/Layout';
import { Bullets } from '~/components/Bullets';
import { Button } from '~/components/Button';
import { DraftModeQueryListener } from '~/components/DraftModeQueryListener';
import { Flag } from '~/components/Flag';
import { Hero } from '~/components/Hero';
import { Svg } from '~/components/Svg';
import { IntegrationsBanner } from '~/components/IntegrationsBanner';
import { Carousel } from '~/components/Carousel';
import { ResponsiveImage } from '~/components/ResponsiveImage';
import { Space } from '~/components/Space';
import { executeQuery } from '~/lib/datocms/executeQuery';
import { notFoundResponse, avoidAstroTypeCheckBug } from '~/lib/notFoundResponse';
import { query } from './_graphql';
import { InlineText } from '~/components/structuredText/InlineText';
import { ensureValidStructuredTextProps } from '@datocms/astro';
import { Wrapper } from '~/components/Wrapper';
import { buildUrlForCustomerStory } from '~/lib/datocms/gqlUrlBuilder/customerStory';
import { buildUrlForUseCasePage } from '~/lib/datocms/gqlUrlBuilder/useCasePage';
import { Card } from '~/components/Card';
import { StripWithContent } from '~/components/StripWithContent';
import s from './_style.module.css';
import { CalloutCard } from '~/components/CalloutCard';
import { Image } from 'astro:assets';

const { integrations, page, customerStories, useCases } = await executeQuery(Astro, query);

if (!page || integrations.length === 0 || customerStories.length === 0 || useCases.length === 0) {
  avoidAstroTypeCheckBug(notFoundResponse);
  return notFoundResponse();
}
---

<Layout seo={page._seoMetaTags}>
  <Hero>
    <Fragment slot="title">
      <InlineText {...ensureValidStructuredTextProps({ data: page.header })} />
    </Fragment>
    <Fragment slot="subtitle">
      <InlineText {...ensureValidStructuredTextProps({ data: page.subheader })} />
    </Fragment>
    <div class={s.buttonContainer}>
      <Button fs="big" as="a" href="https://try.datocms.com">Launch Demo</Button>
      <Button fs="big" as="a" s="invert" href="/contact">Contact sales</Button>
    </div>
  </Hero>

  <!-- <StripWithContent>
    <div class={s.explore}>
      <h2>Everything you need<br />to get you going</h2>
      <p>
        Work with <s>1000s</s> the right balance of features.<br />
        Bell and whistles optional.
      </p>
      <Space top={1}>
        <Button as="a" p="small" s="invert" href="/features">Explore all features</Button>
      </Space>
    </div>
  </StripWithContent> -->

  <Flag>
    <Fragment slot="visual">
      <Image
        src="https://www.datocms-assets.com/205/1715694230-why-datocms-jumpstart-your-projects.png"
        inferSize
        alt="Deterministic"
        style="width: 100%; height: auto;"
      />
    </Fragment>
    <Fragment slot="kicker"> DEVELOPER EXPERIENCE </Fragment>
    <Fragment slot="title"> Jumpstart your projects </Fragment>
    <p>Sick of wrestling with a CMS that boxes you in? Break free and focus on what matters.</p>
    <div>
      <article>
        <Bullets style="good">
          <li>
            <Svg name="icons/regular/check" />
            <span
              >Flexible content modeling and modular fields to create structures for your editors.</span
            >
          </li>
          <li>
            <Svg name="icons/regular/check" />
            <span
              >Solid GraphQL Content API and cache tags to handle the most complex queries. Fast.</span
            >
          </li>
          <li>
            <Svg name="icons/regular/check" />
            <span>A local DatoCMS MCP and LLM-friendly docs to speed you up.</span>
          </li>
        </Bullets>
      </article>
    </div>
  </Flag>

  <Space top={1} bottom={1}>
    <Wrapper>
      <CalloutCard
        title="How much do we love developers? Yes."
        ctaLink="/features#developer-experience"
        illustration
        color="gray"
        asLink
      >
        <Fragment slot="text">
          Modern tools, predictable APIs, full schema control, GraphQL, envs, SDKs, roles, i18n,
          assets... everything you need to work better, without any surprises.
        </Fragment>
      </CalloutCard>
    </Wrapper>
  </Space>

  <Space top={1} bottom={3}>
    <Wrapper>
      <div class={s.cardGrid}>
        <CalloutCard
          size="small"
          title="Cache Tags"
          ctaLink="/features/cache-tags"
          color="pink"
          asLink
        >
          <Fragment slot="text"> Granular cache invalidation for high performance. </Fragment>
        </CalloutCard>
        <CalloutCard
          size="small"
          title="Schema Builder"
          ctaLink="/features/schema-builder"
          color="blue"
          asLink
        >
          <Fragment slot="text"> Define custom structures with models and blocks. </Fragment>
        </CalloutCard>
        <CalloutCard
          size="small"
          title="GraphQL API"
          ctaLink="/features/headless-cms-graphql"
          color="yellow"
          asLink
        >
          <Fragment slot="text"> Faster responses with introspection and auto-docs. </Fragment>
        </CalloutCard>
        <CalloutCard
          size="small"
          title="DatoCMS CLI"
          ctaLink="/docs/scripting-migrations/installing-the-cli"
          color="green"
          asLink
        >
          <Fragment slot="text">
            Automate everything from the command line. 100% Type Safe.
          </Fragment>
        </CalloutCard>
      </div>
    </Wrapper>
  </Space>

  <Flag>
    <Fragment slot="visual">
      <Image
        src="https://www.datocms-assets.com/205/1715694042-why-datocms-create-content-with-ease.png"
        inferSize
        alt="Deterministic"
        style="width: 100%; height: auto;"
      />
    </Fragment>
    <Fragment slot="kicker"> EDITOR EXPERIENCE </Fragment>
    <Fragment slot="title"> Create content with ease </Fragment>
    <p>
      With an intuitive and familiar interface, zip through creating content and pushing updates
      before you can say “Publish!”
    </p>
    <div>
      <article>
        <Bullets style="good">
          <li>
            <Svg name="icons/regular/check" />
            <span>Clean UI to create content, with cozy side-by-side real-time previews.</span>
          </li>
          <li>
            <Svg name="icons/regular/check" />
            <span>Native localization out of the box with granular publishing control.</span>
          </li>
          <li>
            <Svg name="icons/regular/check" />
            <span
              >A banger of a text editor, WYSIWYG layouts, and endless customization with Plugins.</span
            >
          </li>
        </Bullets>
      </article>
    </div>
  </Flag>

  <Space top={1} bottom={1}>
    <Wrapper>
      <CalloutCard
        title="Ever met a Headless CMS loved by editors? You have now."
        ctaLink="/features/editor-experience"
        illustration="svg/illustrations/content-editors2"
        color="green"
        asLink
      >
        <Fragment slot="text">
          Modular content, asset management, Structured Text, scheduling, previews, localization...
          DatoCMS gives editors the CMS buzzwords that actually matter.
        </Fragment>
      </CalloutCard>
    </Wrapper>
  </Space>

  <Space top={1} bottom={3}>
    <Wrapper>
      <div class={s.cardGrid}>
        <CalloutCard
          size="small"
          title="Structured Text"
          ctaLink="/features/structured-content-cms"
          color="blue"
          asLink
        >
          <Fragment slot="text">
            The best text editor you've seen in a Headless CMS. Period.
          </Fragment>
        </CalloutCard>
        <CalloutCard
          size="small"
          title="Modular Content"
          ctaLink="/features/dynamic-layouts"
          color="gray"
          asLink
        >
          <Fragment slot="text">
            Build dynamic layouts with that drag-and-drop WYSIWYG vibe.
          </Fragment>
        </CalloutCard>
        <CalloutCard
          size="small"
          title="Localization"
          ctaLink="/features/headless-cms-multi-language"
          color="pink"
          asLink
        >
          <Fragment slot="text">
            Hablar whichever lingua شما 客戶 parlent with in-built localization.
          </Fragment>
        </CalloutCard>
        <CalloutCard
          size="small"
          title="Asset Management"
          ctaLink="/features/images-api"
          color="yellow"
          asLink
        >
          <Fragment slot="text">
            Stop wasting time editing and optimizing assets. We handle it perfectly.
          </Fragment>
        </CalloutCard>
      </div>
    </Wrapper>
  </Space>

  <Flag>
    <Fragment slot="visual">
      <Image
        src="https://www.datocms-assets.com/205/1715694060-why-datocms-peace-of-mind.png"
        inferSize
        alt="Deterministic"
        style="width: 100%; height: auto;"
      />
    </Fragment>
    <Fragment slot="kicker"> PERFORMANCE & SECURITY </Fragment>
    <Fragment slot="title"> All-round peace of mind </Fragment>
    <p>
      Enjoy peak performance with speed & reliability. The likes you haven't seen with a Headless
      CMS.
    </p>
    <div>
      <article>
        <Bullets style="good">
          <li>
            <Svg name="icons/regular/check" />
            <span>Global CDN network with maximum security and performance.</span>
          </li>
          <li>
            <Svg name="icons/regular/check" />
            <span>Out-of-the box Image & Video APIs optimization via imgix and Mux.</span>
          </li>
          <li>
            <Svg name="icons/regular/check" />
            <span
              >High-grade security & reliability, with TLS encryption, SSO and SCIM, 99.99% average
              uptime, and more.</span
            >
          </li>
        </Bullets>
      </article>
    </div>
  </Flag>

  <Space top={1} bottom={1}>
    <Wrapper>
      <CalloutCard
        title="Still not convinved? Looking for more?"
        ctaLink="/features"
        illustration="svg/illustrations/zen"
        color="yellow"
        asLink
      >
        <Fragment slot="text">
          Explore the 100+ features that make DatoCMS the last Headless CMS you'll ever want to use.</Fragment
        >
      </CalloutCard>
    </Wrapper>
  </Space>

  <IntegrationsBanner
    bubbles={integrations
      .filter((i) =>
        ['ci', 'static-generator', 'language', 'cdn', 'framework'].includes(
          i.integrationType.slug as string,
        ),
      )
      .slice(0, 30)
      .map((integration) => integration.squareLogo || integration.logo!)}
  >
    <Fragment slot="title">Extensible and integrable by design</Fragment>

    <p>
      Being a API-first <a href="/">headless CMS</a>, <strong>
        DatoCMS easily integrates with any third-party platform or service
      </strong>. DatoCMS is considered to be the best CMS for developers because it offers some of
      the best tools in the market: plugins, webhooks, templates and SDKs to get you started in no
      time. Check them out on our <a
        href="https://github.com/datocms/"
        target="_blank"
        rel="noreferrer"
      >
        official Github page
      </a>
    </p>
  </IntegrationsBanner>

  <Space top={2}>
    <Wrapper>
      <h2 class={s.title}>Trusted by happy teams</h2>
      <Space top={2} bottom={3}>
        <div class={s.teamCards}>
          <Card
            href={'made-for/developers'}
            title="For web developers"
            orientation="horizontal"
            size="large"
            boxed={false}
            boxedVisual={false}
          >
            <Fragment slot="image">
              <Svg name="svg/illustrations/people" />
            </Fragment>
            Stop settling for legacy technologies that slow you down.
          </Card>

          <Card
            href={'made-for/marketers'}
            title="For Digital Marketers"
            orientation="horizontal"
            size="large"
            boxed={false}
            boxedVisual={false}
          >
            <Fragment slot="image">
              <Svg name="svg/illustrations/growing" />
            </Fragment>
            Take control of your content with a unified platform for all channels.
          </Card>

          <Card
            href={'made-for/content-creators'}
            title="For Content Creators"
            orientation="horizontal"
            size="large"
            boxed={false}
            boxedVisual={false}
          >
            <Fragment slot="image">
              <Svg name="svg/illustrations/box-things" />
            </Fragment>
            Aggregate alla your content in one place and go live in seconds.
          </Card>

          <Card
            href={'enterprise'}
            title="For Enterprise Teams"
            orientation="horizontal"
            size="large"
            boxed={false}
            boxedVisual={false}
          >
            <Fragment slot="image">
              <Svg name="svg/illustrations/faces" />
            </Fragment>
            See why 25k+ teams trust DatoCMS from governments to F500.
          </Card>
        </div>
      </Space>
    </Wrapper>
  </Space>

  <Space top={2}>
    <Wrapper>
      <h2 class={s.title}>...to build incredible things...</h2>
      <Space top={2} bottom={3}>
        <div class={s.useCasesCards}>
          {
            useCases.map((item) => (
              <Card
                href={buildUrlForUseCasePage(item)}
                target="_blank"
                title={item.title}
                boxed={false}
                size="large"
              >
                <Fragment slot="image">
                  <ResponsiveImage data={item.heroCustomer.responsiveImage} />
                </Fragment>
                <InlineText {...ensureValidStructuredTextProps({ data: item.subtitle })} />
              </Card>
            ))
          }
        </div>
      </Space>
    </Wrapper>
  </Space>

  <Space top={2}>
    <h2 class={s.title}>...and have a blast doing it.</h2>

    <Space top={1}>
      <div class={s.customerStoryWrapper}>
        <Carousel
          autoScroll
          removeButtons
          loop
          stopOnInteraction={false}
          stopOnMouseEnter
          dragDisable
        >
          {
            customerStories.map((item) => (
              <div class={s.cardWrapper}>
                <Card
                  href={buildUrlForCustomerStory(item)}
                  title={item.title}
                  boxed={false}
                  boxedVisual={false}
                  size="medium"
                  class={s.customerStoryItem}
                >
                  <Fragment slot="image">
                    <ResponsiveImage data={item.coverImage.responsiveImage} priority={true} />
                  </Fragment>
                  <span class={s.fakeLink}>Read more →</span>
                </Card>
              </div>
            ))
          }
        </Carousel>
      </div>
    </Space>
  </Space>

  <DraftModeQueryListener query={query} />
</Layout>
