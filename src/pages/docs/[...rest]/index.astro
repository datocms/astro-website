---
import { DraftModeQueryListener } from '~/components/DraftModeQueryListener';
import { PageLayout, findGroupAndPage } from '~/layouts/docs/PageLayout';
import { executeQuery } from '~/lib/datocms/executeQuery';
import { notFoundResponse } from '~/lib/notFoundResponse';

const result = await findGroupAndPage(Astro, Astro.params.rest!);

if (!result) {
  return notFoundResponse();
}

const [group, page, queryListenerProps] = result;
---

<PageLayout page={page} group={group} />

{queryListenerProps.map((props) => <DraftModeQueryListener {...props} />)}
