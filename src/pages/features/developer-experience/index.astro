---
import { Button } from '~/components/Button';
import { CalloutCard } from '~/components/CalloutCard';
import { DraftModeQueryListener } from '~/components/DraftModeQueryListener';
import { Flag } from '~/components/Flag';
import { Hero } from '~/components/Hero';
import { Image } from 'astro:assets';
import { Layout } from '~/layouts/Layout';
import { Space } from '~/components/Space';
import { Svg } from '~/components/Svg';
import { TitleStripWithContent } from '~/components/TitleStripWithContent';
import { Wrapper } from '~/components/Wrapper';
import { avoidAstroTypeCheckBug, notFoundResponse } from '~/lib/notFoundResponse';
import { executeQuery } from '~/lib/datocms/executeQuery';
import { query } from './_graphql';
import s from './_style.module.css';
import { overrideSeo, seoDescription, seoGeneratedCard, seoTitle } from '~/lib/datocms/seo';
import { dashboardUrl } from '~/lib/datocms/dashboardUrl';

const variables = { slug: Astro.url.pathname.split('/').pop()! };
const { page } = await executeQuery(Astro, query, { variables });

if (!page) {
  avoidAstroTypeCheckBug(notFoundResponse);
  return notFoundResponse();
}
---

<Layout
  noFinalCta
  seo={overrideSeo(
    page._seoMetaTags,
    seoTitle('Developer Experience - Modern Headless CMS - DatoCMS'),
    seoDescription(
      'Build fast, ship faster with DatoCMS. GraphQL & REST APIs, staging environments, official SDKs for React, Next.js, Astro, Nuxt, and more. Low latency, high availability, zero surprises. Join 25K+ teams building with the CMS loved by developers.',
    ),
    seoGeneratedCard(Astro, {
      title: 'Developer Experience - Build Fast, Ship Faster',
      excerpt:
        'Modern tools, predictable APIs, and full schema control. Everything you need to work better, without any surprises.',
    }),
  )}
>
  <Hero>
    <Fragment slot="kicker">Developer experience</Fragment>
    <Fragment slot="title">
      Build Fast.<br />
      <mark>Ship Faster</mark>.
    </Fragment>
    <Fragment slot="subtitle">
      Modern tools, predictable APIs, and full schema control. GraphQL, staging envs, SDKs, roles,
      i18n, assets... everything you need to work better, without any surprises.
    </Fragment>
    <a href="/docs" class={s.heroLink}>Launch docs and start building ‚Üí</a>
  </Hero>

  <Flag>
    <Fragment slot="visual">
      <Image
        src="https://www.datocms-assets.com/205/1761921586-low-latency.png"
        inferSize
        alt="Low Latency"
        style="width: 100%; height: auto;"
      />
    </Fragment>
    <Fragment slot="kicker"> APIs go brrr </Fragment>
    <Fragment slot="title"> Low latency, high availability, zero surprises </Fragment>
    <p>
      Our GraphQL and REST APIs are backed by a global CDN, optimized for read-heavy workloads. Same
      goes for media served via imgix and Mux.
    </p>
    <p>
      Every request is served from the closest edge location. No cold starts. No rate limits. No
      region lock-in.
    </p>
  </Flag>

  <Flag>
    <Fragment slot="visual">
      <Image
        src="https://www.datocms-assets.com/205/1761921586-staging-and-ci-support.png"
        inferSize
        alt="Staging and CI"
        style="width: 100%; height: auto;"
      />
    </Fragment>
    <Fragment slot="kicker"> Staging and CI support </Fragment>
    <Fragment slot="title"> Don‚Äôt fear those breaking changes you‚Äôve got planned </Fragment>
    <p>
      Use environments to test schema changes without affecting live content. Happy with your
      results?
    </p>
    <p>
      Run QA builds, promote envs, trigger CI workflows, and merge changes programmatically via CLI
      or API.
    </p>
    <p>No risky migrations. No content loss. Everything here is trackable and reversible.</p>
  </Flag>

  <Space bottom={3}>
    <TitleStripWithContent stripHeight="full">
      <Fragment slot="kicker"> We üß° our developers </Fragment>
      <Fragment slot="title">
        Schema driven, API-first, GraphQL & REST in perfect harmony
      </Fragment>
      <Fragment slot="subtitle">
        <p>
          Enjoy what headless content management was meant to be, without sacrificing on performance
          or the end-editor experience. DatoCMS is the CMS loved by devs across 25K+ teams.
        </p>
      </Fragment>
    </TitleStripWithContent>
  </Space>

  <Flag>
    <Fragment slot="visual">
      <Image
        src="https://www.datocms-assets.com/205/1761921586-one-line-of-code.png"
        inferSize
        alt="One line of code"
        style="width: 100%; height: auto;"
      />
    </Fragment>
    <Fragment slot="kicker"> SDKs for YOUR frontend </Fragment>
    <Fragment slot="title"> Get all your content with one line of code </Fragment>
    <p>
      Use our official SDKs for JavaScript, TypeScript, and Node.js to make your project development
      a breeze.
    </p>
    <p>
      Integrate easily with frameworks like React, Next.js, Astro, Nuxt, Remix, and SvelteKit with
      our official integration guides.
    </p>
  </Flag>

  <Wrapper>
    <CalloutCard
      color="blue"
      title="Official Integration guides to get a headstart with your frameworks"
    >
      <Fragment slot="text">
        <div class={s.integrationsGrid}>
          <a href="/docs/next-js" class={s.integrationsItem}>
            <Svg name="svg/logos/next-squared" class={s.integrationsImage} />
            <p class={s.techName}>Next.js</p>
          </a>

          <a href="/docs/svelte" class={s.integrationsItem}>
            <Svg name="svg/logos/svelte-squared" class={s.integrationsImage} />
            <p class={s.techName}>SvelteKit</p>
          </a>

          <a href="/docs/astro" class={s.integrationsItem}>
            <Svg name="svg/logos/astro-squared" class={s.integrationsImage} />
            <p class={s.techName}>Astro</p>
          </a>

          <a href="/docs/nuxt" class={s.integrationsItem}>
            <Svg name="svg/logos/nuxt-squared" class={s.integrationsImage} />
            <p class={s.techName}>Nuxt</p>
          </a>
        </div>
      </Fragment>
    </CalloutCard>
  </Wrapper>

  <Flag>
    <Fragment slot="visual">
      <Image
        src="https://www.datocms-assets.com/205/1761921590-structured-modeling.png"
        inferSize
        alt="Structured Modeling"
        style="width: 100%; height: auto;"
      />
    </Fragment>
    <Fragment slot="kicker"> Structured modeling without the boilerplate </Fragment>
    <Fragment slot="title"> Fast to define, safe to evolve </Fragment>
    <p>
      The Schema Builder gives you full control over content structure with models, fields, blocks,
      and validations.
    </p>
    <p>
      No config files to sync. No schema drift. No codegen step. Changes go live instantly across
      your project.
    </p>
    <p>
      Need a headstart on other projects? We‚Äôve got schema imports and exports that are a delight
      :chef-kiss:
    </p>
  </Flag>

  <Space top={1} bottom={3}>
    <Wrapper>
      <div class={s.cardGrid}>
        <CalloutCard
          color="pink"
          size="small"
          title="Blocks"
          ctaLink="/docs/content-modelling/blocks"
          asLink
        >
          <Fragment slot="text"> Blocks let you build rich, dynamic layouts </Fragment>
        </CalloutCard>
        <CalloutCard
          color="azure"
          size="small"
          title="Validations"
          ctaLink="/docs/content-modelling/validations"
          asLink
        >
          <Fragment slot="text"> Give your editors guardrails when editing content </Fragment>
        </CalloutCard>
        <CalloutCard
          color="green"
          size="small"
          title="Models"
          ctaLink="/docs/general-concepts/data-modelling"
          asLink
        >
          <Fragment slot="text"> Define the layout of your schema as you like </Fragment>
        </CalloutCard>
        <CalloutCard
          color="yellow"
          size="small"
          title="Fields"
          ctaLink="/docs/content-modelling"
          asLink
        >
          <Fragment slot="text">
            Explore all the field types and field plugins in the CMS
          </Fragment>
        </CalloutCard>
      </div>
    </Wrapper>
  </Space>

  <Flag>
    <Fragment slot="visual">
      <Image
        src="https://www.datocms-assets.com/205/1761921586-structured-modeling-1.png"
        inferSize
        alt="Cache Tags"
        style="width: 100%; height: auto;"
      />
    </Fragment>
    <Fragment slot="kicker"> Performance, cache control, and predictability </Fragment>
    <Fragment slot="title"> We‚Äôre fast. ‚ÄúNot enough time to go make a coffee‚Äù fast. </Fragment>
    <p>
      CDN-backed APIs ensure low latency worldwide, and not to flex too much, but we‚Äôve been
      averaging at 40ms on our CDA with a 100% success rate üíÅ‚Äç‚ôÄÔ∏è
    </p>
    <p>
      Plus, Cache Tags give you granular invalidation to purge only what changed, so even your
      builds get faster. No full rebuilds unless you want them.
    </p>
  </Flag>

  <Space top={1} bottom={3}>
    <Wrapper>
      <CalloutCard
        title="Haven‚Äôt played with Cache Tags yet?"
        ctaLink="/docs/content-delivery-api/cache-tags"
        illustration="svg/illustrations/live-4"
        color="blue"
        asLink
      >
        <Fragment slot="text">
          DatoCMS Cache Tags give you fine-grained cache invalidation for high-performance content
          delivery. No more stale content. No more full rebuilds. We originally developed them for
          ourselves, and they‚Äôre pretty sweet.
        </Fragment>
      </CalloutCard>
    </Wrapper>
  </Space>

  <Space bottom={3}>
    <TitleStripWithContent stripHeight="full">
      <Fragment slot="kicker"> Say hello to headless CMS done right </Fragment>
      <Fragment slot="title"> Stop fiddling with your CMS. Start shipping. </Fragment>
      <Fragment slot="subtitle">
        DatoCMS gives developers modern tools, predictable APIs, and full control. Build without
        friction. Ship without surprises. Join 25K+ teams already building with us.
      </Fragment>
      <div class={s.buttonContainer}>
        <Button p="big" as="a" href={dashboardUrl('/signup')}> Sign up for free </Button>
        <Button p="big" as="a" s="invert" href="/docs"> Read the docs </Button>
      </div>
    </TitleStripWithContent>
  </Space>

  <DraftModeQueryListener query={query} variables={variables} />
</Layout>
